---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/astro/Navigation.astro';
import Footer from '../components/astro/Footer.astro';
import Hero from '../components/astro/Hero.astro';
import CardGrid from '../components/astro/CardGrid.astro';
import { getEntry } from 'astro:content';

const homeData = await getEntry('pages', 'home');
const { title, description, hero, sections } = homeData.data;
---

<BaseLayout title={title} description={description}>
  <Navigation />
  
  {hero && (
    <Hero
      heading={hero.heading}
      subheading={hero.subheading}
      image={hero.image}
      ctaText={hero.ctaText}
      ctaLink={hero.ctaLink}
    />
  )}

  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    {sections?.map((section) => (
      <section class="mb-16">
        {section.heading && (
          <h2 class="font-display font-bold text-3xl mb-6 text-gray-900">
            {section.heading}
          </h2>
        )}
        
        {section.type === 'text' && section.content && (
          <div class="prose prose-lg max-w-none">
            <p class="text-gray-700 leading-relaxed">{section.content}</p>
          </div>
        )}
        
        {section.type === 'cards' && section.items && (
          <CardGrid cards={section.items} />
        )}
      </section>
    ))}
  </main>

  <Footer />
</BaseLayout>
